3. Python的非正式简介
===

在以下示例中，输入和输出通过是否存在提示来区分([>>>](＃)和...)：要重复示例，必须在提示符后出现提示时出现提示;从解释器输出不以提示开头的行. 请注意，示例中一行上的辅助提示意味着您必须键入一个空行;这用于结束多行命令. 

本手册中的许多示例，即使是在交互式提示符下输入的示例，都包含注释.  Python中的注释以井号字符＃开头，并延伸到物理行的末尾. 注释可能出现在行的开头或跟随空格或代码，但不在字符串文字中. 字符串文字中的哈希字符只是一个哈希字符. 由于注释是为了澄清代码而不是由Python解释，因此在键入示例时可能会省略它们. 

一些例子：

```
＃这是第一条评论
spam = 1＃，这是第二条评论
          ＃...现在是第三个！
text =“＃这不是评论，因为它在引号内. ”
```

### 3.1. 使用Python作为计算器

让我们尝试一些简单的Python命令. 启动解释器并等待主要提示符`>>>`.  (不应该花很长时间. )

#### 3.1.1. 数字

解释器充当一个简单的计算器：您可以在其上键入表达式，它将写入值. 表达式语法很简单：运算符`+`，`-`，`*`和`/`就像大多数其他语言一样工作(例如，Pascal或C);括号(`()`)可用于分组. 例如：

```
>>>
>>> 2 + 2
4
>>> 50  -  5 * 6
20
>>>(50  -  5 * 6)/ 4
5
>>> 8/5＃division始终返回浮点数
1.6
```

整数(例如`2`，`4`，`20`)具有类型[int](＃)，具有小数部分的那些(例如`5.0`，`1.6`)具有类型[float](＃) . 我们将在本教程后面看到有关数值类型的更多信息. 

除(`/`)总是返回一个浮点数. 要做[floor division](＃)并获得整数结果(丢弃任何小数结果)，你可以使用`//`运算符;计算余数你可以使用`％`：

```
>>>
>>> 17/3＃经典师返回浮动
5.666666666666667
>>>
>>> 17 // 3＃floor division丢弃小数部分
五
>>> 17％3＃％运算符返回除法的余数
2
>>> 5 * 3 + 2＃结果*除数+余数
17
```

使用Python，可以使用`**`运算符来计算幂[1](＃)：

```
>>>
>>> 5 ** 2＃5平方
25
>>> 2 ** 7＃2的力量为7
128
```

等号(`=`)用于为变量赋值. 之后，在下一个交互式提示之前不会显示任何结果：

```
>>>
>>>宽度= 20
>>>身高= 5 * 9
>>>宽*高
900
```

如果变量没有“定义”(赋值)，尝试使用它会给你一个错误：

```
>>>
>>> n＃尝试访问未定义的变量
Traceback(最近一次调用最后一次)：
  在<module>中的文件“<stdin>”，第1行
NameError：未定义名称“n”
```

浮点数完全支持;具有混合类型操作数的运算符将整数操作数转换为浮点数：

```
>>>
>>> 4 * 3.75  -  1
14.0
```

在交互模式下，最后打印的表达式被赋值给变量`_`. 这意味着当您使用Python作为桌面计算器时，继续计算会更容易一些，例如：

```
>>>
>>> tax = 12.5 / 100
>>>价格= 100.50
>>>价格*税
12.5625
>>>价格+ _
113.0625
>>>圆(_，2)
113.06
```

该变量应被用户视为只读. 不要为其显式赋值 - 您将创建一个具有相同名称的独立局部变量，以使用其魔术行为屏蔽内置变量. 

除了[int](＃)和[float](＃)之外，Python还支持其他类型的数字，例如[Decimal](＃)和[Fraction](＃).  Python还内置了对[复数](＃)的支持，并使用j或J后缀来表示虚部(例如`3 + 5j`). 

#### 3.1.2. 字符串

除了数字，Python还可以操作字符串，这可以通过多种方式表达. 它们可以用单引号(`'''`)或双引号(`“...”`)括起来，结果相同[2].  \可用于转义引号：

```
>>>
>>>'垃圾邮件'＃单引号
'垃圾鸡蛋'
>>>'不'＃用''逃避单引号......
“不”
>>>“不”＃...或使用双引号代替
“不”
>>>'“是的，”他们说. 
“是的，”他们说. 
>>>“\”是的，“他们说. ”
“是的，”他们说. 
>>>'“不是，”他们说. 
“不是吗，”他们说. 
```

在交互式解释器中，输出字符串用引号括起来，特殊字符用反斜杠转义. 虽然这有时可能与输入看起来不同(封闭的引号可能会改变)，但这两个字符串是等价的. 如果字符串包含单引号而没有双引号，则该字符串用双引号括起来，否则用单引号括起来.  [print()](＃)函数通过省略括号引号和打印转义字符和特殊字符来产生更易读的输出：

```
>>>
>>>'“不是，”他们说. 
“不是吗，”他们说. 
>>> print('“不是，”他们说. ')
“不是，”他们说. 
>>> s ='第一行. \ n第二行. ' ＃\ n表示换行符
>>> s＃without print()，\ n包含在输出中
'第一行. \ n第二行. '
>>> print(s)#with print()，\ n生成一个新行
第一行. 
第二行. 
```

如果你不希望以`\`开头的字符被解释为特殊字符，你可以通过在第一个引号之前添加一个r来使用原始字符串：

```
>>>
>>> print('C：\ some \ name')＃here \ n表示换行！
C：\一些\名称
>>> print(r'C：\ some \ name')＃注意报价前的r
C：\一些\名称
```

字符串文字可以跨越多行. 一种方法是使用三引号：`“”“......”“”或`''''''''``行尾自动包含在字符串中，但可以通过在行尾添加“\`来防止这种情况. 以下示例：

```
打印(”””\
用法：东西[OPTIONS]
     -h显示此用法消息
     -H hostname要连接的主机名
“”“)
```

产生以下输出(请注意，不包括初始换行符)：

```
用法：东西[OPTIONS]
     -h显示此用法消息
     -H hostname要连接的主机名
```

字符串可以与`+`运算符连接(粘合在一起)，并用`*`重复：

```
>>>
>>>＃3次'un'，其次是'ium'
>>> 3 *'un'+'ium'
'unununium'
```

两个或多个彼此相邻的字符串文字(即括号之间的字符串文字)会自动连接. 

```
>>>
>>>'Py''thon'
'蟒蛇'
```

当您想要断开长字符串时，此功能特别有用：

```
>>>
>>> text =('在括号内放几个字符串'
......'让他们联合起来. ')
>>>文字
“在括号内放几个字符串，让它们连在一起. ”
```

这仅适用于两个文字，而不是变量或表达式：

```
>>>
>>> prefix ='Py'
>>>前缀'thon'＃不能连接变量和字符串文字
  文件“<stdin>”，第1行
    前缀'thon'
                ^
SyntaxError：语法无效
>>>('un'* 3)'ium'
  文件“<stdin>”，第1行
    ('un'* 3)'ium'
                   ^
SyntaxError：语法无效
```

如果要连接变量或变量和文字，请使用`+`：

```
>>>
>>>前缀+'thon'
'蟒蛇'
```

字符串可以被索引(下标)，第一个字符具有索引0.没有单独的字符类型;一个字符只是一个大小为1的字符串：

```
>>>
>>> word ='Python'
>>> word [0]＃在0位置的字符
'P'
>>>单词[5]位置5的＃字符
'N'
```

指数也可能是负数，从右边开始计算：

```
>>>
>>> word [-1]＃last character
'N'
>>> word [-2]＃倒数第二个字符
'O'
>>>单词[-6]
'P'
```

请注意，由于-0与0相同，因此负索引从-1开始. 

除索引外，还支持切片. 虽然索引用于获取单个字符，但切片允许您获取子字符串：

```
>>>
>>> word [0：2]＃位置0(包括)到2的字符(不包括在内)
'PY'
>>>单词[2：5]＃位置2(包括)到5(排除在外)＃字符
“寿”
```

请注意如何始终包含开始，并始终排除结束. 这确保了`s [：i] + s [i：]`总是等于`s`：

```
>>>
>>>单词[：2] +单词[2：]
'蟒蛇'
>>>单词[：4] +单词[4：]
'蟒蛇'
```

切片索引具有有用的默认值;省略的第一个索引默认为零，省略的第二个索引默认为要切片的字符串的大小. 

```
>>>
>>>单词[：2]＃字符从开头到位置2(不包括)
'PY'
>>>单词[4：]＃位置4(包括)到最后的＃字符
'上'
>>> word [-2：]从倒数第二个(包括)到结尾的＃个字符
'上'
```

记住切片如何工作的一种方法是将索引视为指向字符之间，第一个字符的左边缘编号为0.然后，n个字符的字符串的最后一个字符的右边缘具有索引n，例如：

```
 + --- + --- + --- + --- + --- + --- +
 | P | y | t | h | o | n |
 + --- + --- + --- + --- + --- + --- +
 0 1 2 3 4 5 6
-6 -5 -4 -3 -2 -1
```

第一行数字给出了字符串中索引0 ... 6的位置;第二行给出相应的负指数. 从i到j的切片分别由标记为i和j的边之间的所有字符组成. 

对于非负索引，切片的长度是索引的差异，如果两者都在边界内. 例如，`word [1：3]`的长度为2. 

尝试使用过大的索引将导致错误：

```
>>>
>>> word [42]＃这个词只有6个字符
Traceback(最近一次调用最后一次)：
  在<module>中的文件“<stdin>”，第1行
IndexError：字符串索引超出范围
```

但是，在用于切片时，优雅地处理超出范围的切片索引：

```
>>>
>>>字[4:42]
'上'
>>>单词[42：]
“”
```

Python字符串无法更改 - 它们是[immutable](＃). 因此，分配给字符串中的索引位置会导致错误：

```
>>>
>>> word [0] ='J'
Traceback(最近一次调用最后一次)：
  在<module>中的文件“<stdin>”，第1行
TypeError：'str'对象不支持项目分配
>>> word [2：] ='py'
Traceback(最近一次调用最后一次)：
  在<module>中的文件“<stdin>”，第1行
TypeError：'str'对象不支持项目分配
```

如果您需要不同的字符串，则应创建一个新字符串：

```
>>>
>>>'J'+字[1：]
“Jython的
>>> word [：2] +'py'
'Pypy'
```

内置函数[len()](＃)返回字符串的长度：

```
>>>
>>> s ='supercalifragilisticexpialidocious'
>>> len(s)
34
```

也可以看看

[文本序列类型 -  str](＃)

字符串是序列类型的示例，并支持此类型支持的常见操作. 

[字符串方法](#)

字符串支持大量基本转换和搜索方法. 

[格式化字符串文字](#)

具有嵌入式表达式的字符串文字. 

[格式字符串语法](#)

有关str.format()的字符串格式的信息. 

[printf-style String Formatting](#)

当字符串是％运算符的左操作数时调用的旧格式化操作在此处更详细地描述. 

#### 3.1.3. 清单

Python知道许多复合数据类型，用于将其他值组合在一起. 最通用的是列表，它可以写成方括号之间的逗号分隔值(项)列表. 列表可能包含不同类型的项目，但通常项目都具有相同的类型. 

```
>>>
>>> square = [1,4,9,16,25]
>>>正方形
[1,4,9,16,25]
```

像字符串(以及所有其他内置的[sequence](#)类型)，列表可以被索引和切片：

```
>>>
>>> square [0] #indexing返回项目
1
>>>正方形[-1]
25
>>>正方形[-3：]＃切片返回一个新列表
[9,16,25]
```

所有切片操作都返回包含所请求元素的新列表. 这意味着以下切片返回列表的新(浅)副本：

```
>>>
>>>正方形[：]
[1,4,9,16,25]
```

列表还支持串联等操作：

```
>>>
>>>正方形+ [36,49,64,81,100]
[1,4,9,16,25,36,49,64,81,100]
```

与[immutable](#)字符串不同，列表是[mutable](#)类型，即可以更改其内容：

```
>>>
>>> cubes = [1,8,27,65,125]＃这里的东西错了
>>> 4 ** 3＃4的立方体是64，而不是65！
64
>>> cubes [3] = 64＃替换错误的值
>>>立方体
[1,8,27,64,125]
```

您还可以使用[append()](#)方法在列表末尾添加新项目(我们稍后会看到有关方法的更多信息)：

```
>>>
>>> cubes.append(216)＃添加6的立方体
>>> cubes.append(7 ** 3)＃和7的立方体
>>>立方体
[1,8,27,64,125,216,343]
```

也可以分配切片，这甚至可以改变列表的大小或完全清除它：

```
>>>
>>> letters = ['a'，'b'，'c'，'d'，'e'，'f'，'g']
>>>信件
['a'，'b'，'c'，'d'，'e'，'f'，'g']
>>>＃替换一些值
>>>字母[2：5] = ['C'，'D'，'E']
>>>信件
['a'，'b'，'C'，'D'，'E'，'f'，'g']
>>>＃现在删除它们
>>>字母[2：5] = []
>>>信件
['a'，'b'，'f'，'g']
>>>＃通过用空列表替换所有元素来清除列表
>>>字母[：] = []
>>>信件
[]
```

内置函数[len()](#)也适用于列表：

```
>>>
>>> letters = ['a'，'b'，'c'，'d']
>>> len(字母)
4
```

可以嵌套列表(创建包含其他列表的列表)，例如：

```
>>>
>>> a = ['a'，'b'，'c']
>>> n = [1,2,3]
>>> x = [a，n]
>>> x
[['a'，'b'，'c']，[1,2,3]]
>>> x [0]
['a'，'b'，'c']
>>> x [0] [1]
'B'
```

### 3.2. 迈向编程的第一步

当然，我们可以将Python用于更复杂的任务，而不是将两个和两个一起添加. 例如，我们可以编写[Fibonacci系列](#)的初始子序列，如下所示：

```
>>>
>>>＃斐波那契系列：
...＃两个元素的总和定义下一个
...... a，b = 0,1
>>>而<10：
...打印(一)
...... a，b = b，a + b
...
0
1
1
2
3
五
8
```

此示例介绍了几个新功能. 

 - 第一行包含多个赋值：变量`a`和`b`同时获取新值0和1.在最后一行再次使用它，证明右侧的表达式都是首先计算的在任何任务发生之前. 右侧表达式从左到右进行评估. 

 - 只要条件(这里：`a <10`)保持为真，[while](#)循环就会执行. 在Python中，就像在C中一样，任何非零整数值都是真的;零是假的. 条件也可以是字符串或列表值，实际上是任何序列;任何长度非零的东西都是真的，空序列都是假的. 该示例中使用的测试是简单的比较. 标准比较运算符的编写方式与C中相同：`<`(小于)，`>`(大于)，`==`(等于)，`<=`(小于或等于)，` > =`(大于或等于)和`！=`(不等于). 

 - 循环体是缩进的：缩进是Python对语句进行分组的方式. 在交互式提示符下，您必须为每个缩进行键入一个选项卡或空格. 在实践中，您将使用文本编辑器为Python准备更复杂的输入;所有体面的文本编辑都有自动缩进功能. 当以交互方式输入复合语句时，必须后跟一个空行以指示完成(因为解析器在您键入最后一行时无法猜出). 请注意，基本块中的每一行必须缩进相同的数量. 

 -  [print()](#)函数写入给定参数的值. 它与仅处理多个参数，浮点数量和字符串的方式不同，只是编写您想要编写的表达式(正如我们之前在计算器示例中所做的那样). 字符串打印时不带引号，并在项目之间插入空格，因此您可以很好地格式化事物，如下所示：

```
>>>
>>> i = 256 * 256
>>> print('我的价值是'，i)
i的值是65536
```

关键字参数end可用于避免输出后的换行符，或者使用不同的字符串结束输出：

```
>>>
>>> a，b = 0,1
>>>而<1000：
... print(a，end ='，')
...... a，b = b，a + b
...
0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987，
```

脚注
---

[1](#)因为`**'的优先级高于`-`，所以`-3 ** 2`将被解释为` - (3 ** 2)`，从而得到`-9`. 要避免这种情况并得到`9`，你可以使用`( -  3)** 2`. 

[2](#)与其他语言不同，诸如`\ n`之类的特殊字符与单引号(''''')和双引号(`“...”`)具有相同的含义. 两者之间的唯一区别是在单引号内你不需要逃避```(但你必须逃避`\'`)，反之亦然.